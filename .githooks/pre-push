#!/usr/bin/env bash
set -euo pipefail
# Allow skipping once: GIT_ZT=0 git push
if [ "${GIT_ZT:-1}" != "1" ]; then exit 0; fi
ROOT="$(git rev-parse --show-toplevel 2>/dev/null || pwd)"
cd "$ROOT"
if ! command -v pwsh >/dev/null 2>&1; then
  echo "[pre-push] pwsh not found; skipping checks."
  exit 0
fi
pwsh -NoLogo -NoProfile -File ".githooks/pre-push.ps1" || exit $?
echo "[pre-push] checks completed."